(this["webpackJsonpsocial-network-front"]=this["webpackJsonpsocial-network-front"]||[]).push([[0],{121:function(e,t,c){},122:function(e,t,c){},123:function(e,t,c){},124:function(e,t,c){"use strict";c.r(t);var n=c(0),a=c(27),r=c.n(a),s=c(25),i=c(12),l=c(7),o=(c(35),c(90),c(9)),d=c(139),j=c(129),u=c(130),b=c(135),m=c(136),h=c(137),O=c(82),x=c(131),f=c(84),p=c(132),g=c(65),v=c(18),N=c(14),y=function(e){var t=new Date(Date.now()-e),c=t.getDate();if(c)return c+" days ago";var n=t.getHours();if(n)return n;var a=t.getMinutes();return a?a+" minutes ago":"few seconds ago"},w=c(11),_=c(41),C=c(80),k=c(81),I=c(40),S="GET_POSTS",E="ADD_POST",L="DELETE_POST",T="UPDATE_POST",P="LIKE_POST",D="UNLIKE_POST",G="EDIT_COMMENT",B="DELETE_COMMENT",z="LOGIN",A="LOGOUT",F="GET_USER",H="UPDATE_USER",M="UPLOAD_PICTURE",R="SEND_INVITATION",U="ACCEPT_INVITATION",q="GET_USERS",W=[],J={user:[],isLogged:!1},K={},V=Object(_.combineReducers)({posts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case S:return t.payload;case L:return e.filter((function(e){return e._id!==t.payload.postId}));case E:return[t.payload].concat(Object(I.a)(e));case T:return e.map((function(e){return e._id===t.payload.postId?Object(l.a)(Object(l.a)({},e),{},{message:t.payload.message}):e}));case P:return e.map((function(e){return e._id===t.payload.postId?Object(l.a)(Object(l.a)({},e),{},{likers:[t.payload.userId].concat(Object(I.a)(e.likers))}):e}));case D:return e.map((function(e){return e._id===t.payload.postId?Object(l.a)(Object(l.a)({},e),{},{likers:e.likers.filter((function(e){return e!==t.payload.userId}))}):e}));case G:return e.map((function(e){return e._id===t.payload.postId?Object(l.a)(Object(l.a)({},e),{},{comments:e.comments.map((function(e){return e._id===t.payload.commentId?Object(l.a)(Object(l.a)({},e),{},{text:t.payload.text}):e}))}):e}));case B:return e.map((function(e){return e._id===t.payload.postId?Object(l.a)(Object(l.a)({},e),{},{comments:e.comments.filter((function(e){return e._id!==t.payload.commentId}))}):e}));default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case F:return Object(l.a)(Object(l.a)({},e),{},{user:t.payload});case H:return Object(l.a)(Object(l.a)({},e),{},{user:Object(l.a)(Object(l.a)({},e.user),{},{biographie:t.payload.biographie,firstName:t.payload.firstName,lastName:t.payload.lastName})});case M:return Object(l.a)(Object(l.a)({},e),{},{user:Object(l.a)(Object(l.a)({},e.user),{},{picture:t.payload})});case U:return Object(l.a)(Object(l.a)({},e),{},{user:Object(l.a)(Object(l.a)({},e.user),{},{invitationlist:e.user.invitationlist.filter((function(e){return e!==t.payload.senderId})),friendlist:[t.payload.senderId].concat(Object(I.a)(e.user.friendlist))})});case z:return Object(l.a)(Object(l.a)({},e),{},{isLogged:!0});case A:return Object(l.a)(Object(l.a)({},e),{},{isLogged:!1});default:return e}},users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case q:return t.payload;case R:return e.map((function(e){return e._id===t.payload.receiverId?Object(l.a)(Object(l.a)({},e),{},{invitationlist:[t.payload.senderId].concat(Object(I.a)(e.invitationlist))}):e}));default:return e}}}),Q=[k.a],X=Object(_.createStore)(V,{},Object(C.composeWithDevTools)(_.applyMiddleware.apply(void 0,Q))),Y=c(13),Z=c.n(Y),$=function(){return function(e){Z.a.get("/api/posts/").then((function(t){e({type:S,payload:t.data})}))}},ee=c(1);var te=function(e){var t=e.post,c=Object(w.b)(),a=X.getState().user.user,r=X.getState().users,i=Object(n.useState)(!1),l=Object(o.a)(i,2),_=l[0],C=l[1],k=Object(n.useState)(!1),I=Object(o.a)(k,2),S=I[0],E=I[1],z=Object(n.useState)(!1),A=Object(o.a)(z,2),F=A[0],H=A[1],M=Object(n.useState)(""),R=Object(o.a)(M,2),U=R[0],q=R[1],W=Object(n.useState)(!1),J=Object(o.a)(W,2),K=J[0],V=J[1],Q=Object(n.useState)(""),Y=Object(o.a)(Q,2),te=Y[0],ce=Y[1],ne=Object(n.useState)(!1),ae=Object(o.a)(ne,2),re=ae[0],se=ae[1],ie=Object(n.useState)(""),le=Object(o.a)(ie,2),oe=le[0],de=le[1];return Object(n.useEffect)((function(){t.likers.includes(a._id)?C(!0):C(!1)}),[a._id,t.likers,_]),Object(ee.jsxs)("div",{style:{backgroundColor:"white"},className:"mb-3 rounded",children:[Object(ee.jsx)(d.a,{bg:"white",style:{border:"none"},children:Object(ee.jsxs)(j.a,{children:[Object(ee.jsx)(s.b,{to:"/".concat(t.posterId),children:Object(ee.jsxs)(d.a.Brand,{children:[Object(ee.jsx)(u.a,{src:r.length&&r.filter((function(e){return e._id===t.posterId}))[0]?r.filter((function(e){return e._id===t.posterId}))[0].avatar:null,roundedCircle:!0,width:40,height:40,alt:"",className:"d-inline-block align-top"}),Object(ee.jsx)("span",{className:"ml-3 font-weight-bold align-middle",children:r.length&&r.filter((function(e){return e._id===t.posterId}))[0]?r.filter((function(e){return e._id===t.posterId}))[0].firstName+" "+r.filter((function(e){return e._id===t.posterId}))[0].lastName:null})]})}),Object(ee.jsx)("span",{className:"float-right align-top",children:y(U.time)}),a._id===t.posterId?Object(ee.jsxs)(b.a,{children:[Object(ee.jsx)(b.a.Toggle,{as:"image",children:Object(ee.jsx)(N.a,{icon:v.d,size:"md"})}),Object(ee.jsxs)(b.a.Menu,{children:[Object(ee.jsx)(b.a.Item,{onClick:function(){return se(!0)},children:"Edit Post"}),Object(ee.jsxs)(m.a,{size:"md",show:re,onHide:function(){se(!1),de("")},backdrop:"static",children:[Object(ee.jsx)(m.a.Header,{closeButton:!0,children:Object(ee.jsx)(m.a.Title,{id:"edit-post",children:"Edit your Post"})}),Object(ee.jsx)(m.a.Body,{children:Object(ee.jsx)(h.a,{children:Object(ee.jsxs)(h.a.Group,{children:[Object(ee.jsx)(h.a.Label,{children:"Post"}),Object(ee.jsx)(h.a.Control,{as:"textarea",rows:3,placeholder:t.message,onChange:function(e){return de(e.target.value)},value:oe})]})})}),Object(ee.jsxs)(m.a.Footer,{children:[Object(ee.jsx)(O.a,{variant:"secondary",onClick:function(){se(!1),de("")},children:"Cancel"}),Object(ee.jsx)(O.a,{variant:"primary",onClick:function(){var e,n;oe&&window.confirm("Are you sure you want to edit this post ?")?(c((e=t._id,n=oe,function(t){Z.a.put("/api/posts/".concat(e),{message:n}).then((function(c){t({type:T,payload:{message:n,postId:e}})})).catch((function(e){return console.log(e)}))})),de(""),se(!1)):alert("Please fill the form!")},children:"Edit Post"})]})]}),Object(ee.jsx)(b.a.Item,{onClick:function(){var e;window.confirm("Are you sure you want to delete this post ?")&&c((e=t._id,function(t){Z.a.delete("/api/posts/".concat(e)).then((function(c){return t({type:L,payload:{postId:e}})})).catch((function(e){return console.log(e)}))}))},children:"Delete Post"})]})]}):null]})}),Object(ee.jsxs)("div",{className:"mt-3",children:[Object(ee.jsx)("p",{className:"ml-4 mr-4 text-left",children:t.message}),t.picture?Object(ee.jsx)(u.a,{className:"d-block w-100 h-100",src:t.picture,alt:""}):null,Object(ee.jsx)(j.a,{className:"pb-3 pt-3",children:Object(ee.jsxs)(x.a,{children:[Object(ee.jsx)(f.a,{children:Object(ee.jsxs)("div",{className:"text-center",children:[Object(ee.jsx)("button",{style:{border:"none",backgroundColor:"white"},children:_?Object(ee.jsx)(N.a,{color:"red",icon:v.e,size:"lg",onClick:function(){var e,n;c((e=t._id,n=a._id,function(t){Z.a.patch("/api/posts/unlike-post/".concat(e),{id:n}).then((function(c){t({type:D,payload:{postId:e,userId:n}})})).catch((function(e){return console.log(e)}))})),C(!1)}}):Object(ee.jsx)(N.a,{icon:g.b,size:"lg",onClick:function(){var e,n;c((e=t._id,n=a._id,function(t){Z.a.patch("/api/posts/like-post/".concat(e),{id:n}).then((function(c){t({type:P,payload:{postId:e,userId:n}})})).catch((function(e){return console.log(e)}))})),C(!0)}})}),Object(ee.jsx)("a",{className:"font-weight-bold align-top ml-2 text-dark",onClick:function(){return E(!0)},children:t.likers.length}),Object(ee.jsxs)(m.a,{size:"md",show:S,onHide:function(){return E(!1)},"aria-labelledby":"like-list",centered:!0,children:[Object(ee.jsx)(m.a.Header,{closeButton:!0,children:Object(ee.jsxs)(m.a.Title,{id:"like-list",children:["Likes (",t.likers.length,")"]})}),Object(ee.jsx)(m.a.Body,{children:t.likers.map((function(e){return Object(ee.jsx)("div",{className:"d-flex justify-content-between mb-2 pb-2 border-bottom",children:Object(ee.jsxs)("div",{className:"d-flex align-items-center hover-pointer",children:[Object(ee.jsx)("img",{className:"img-xs rounded-circle",src:r.length&&r.filter((function(t){return t._id===e}))[0]?r.filter((function(t){return t._id===e}))[0].avatar:null,alt:""}),Object(ee.jsx)("div",{className:"ml-2 pt-3",children:Object(ee.jsx)("p",{children:r.length&&r.filter((function(t){return t._id===e}))[0]?r.filter((function(t){return t._id===e}))[0].firstName+" "+r.filter((function(t){return t._id===e}))[0].lastName:null})})]})})}))})]})]})}),Object(ee.jsx)(f.a,{children:Object(ee.jsxs)("div",{className:"text-center",children:[Object(ee.jsx)("button",{style:{border:"none",backgroundColor:"white"},children:Object(ee.jsx)(N.a,{icon:g.a,size:"lg"})}),Object(ee.jsx)("a",{className:"font-weight-bold align-top ml-2 text-dark",onClick:function(){return H(!0)},children:t.comments.length}),Object(ee.jsxs)(m.a,{size:"md",show:F,onHide:function(){return H(!1)},"aria-labelledby":"like-list",centered:!0,children:[Object(ee.jsx)(m.a.Header,{closeButton:!0,children:Object(ee.jsxs)(m.a.Title,{id:"like-list",children:["Comments (",t.comments.length,")"]})}),Object(ee.jsx)(m.a.Body,{children:t.comments.map((function(e){return Object(ee.jsxs)(p.a,{children:[Object(ee.jsx)(u.a,{className:"ml-3",src:r.filter((function(t){return t._id===e.commenterId})).length?r.filter((function(t){return t._id===e.commenterId}))[0].avatar:null,roundedCircle:!0,width:30,height:30,alt:"Profile image"}),Object(ee.jsxs)(p.a.Body,{className:"bg-light ml-3 mr-3 mb-3",children:[Object(ee.jsxs)("h5",{children:[r.filter((function(t){return t._id===e.commenterId})).length?r.filter((function(t){return t._id===e.commenterId}))[0].firstName+" "+r.filter((function(t){return t._id===e.commenterId}))[0].lastName:null,Object(ee.jsx)("span",{className:"float-right text-secondary font-weight-light h6",children:y(e.timestamp)})]}),Object(ee.jsx)("p",{children:e.text})]}),a._id===e.commenterId?Object(ee.jsxs)(b.a,{children:[Object(ee.jsx)(b.a.Toggle,{as:"image",children:Object(ee.jsx)(N.a,{icon:v.d,size:"md"})}),Object(ee.jsxs)(b.a.Menu,{children:[Object(ee.jsx)(b.a.Item,{onClick:function(){return V(!0)},children:"Edit Comment"}),Object(ee.jsxs)(m.a,{size:"md",show:K,onHide:function(){V(!1),ce("")},backdrop:"static",children:[Object(ee.jsx)(m.a.Header,{closeButton:!0,children:Object(ee.jsx)(m.a.Title,{id:"edit-comment",children:"Edit your Comment"})}),Object(ee.jsx)(m.a.Body,{children:Object(ee.jsx)(h.a,{children:Object(ee.jsxs)(h.a.Group,{children:[Object(ee.jsx)(h.a.Label,{children:"Comment"}),Object(ee.jsx)(h.a.Control,{as:"textarea",rows:3,placeholder:e.text,onChange:function(e){return ce(e.target.value)},value:te})]})})}),Object(ee.jsxs)(m.a.Footer,{children:[Object(ee.jsx)(O.a,{variant:"secondary",onClick:function(){V(!1),ce("")},children:"Cancel"}),Object(ee.jsx)(O.a,{variant:"primary",onClick:function(){var n,a,r;te&&window.confirm("Are you sure you want to edit this comment ?")?(c((n=t._id,a=e._id,r=te,function(e){Z.a.patch("api/posts/edit-comment-post/".concat(n),{commentId:a,text:r}).then((function(t){e({type:G,payload:{postId:n,commentId:a,text:r}})})).catch((function(e){return console.log(e)}))})),ce(""),V(!1)):alert("Please fill the form!")},children:"Edit Comment"})]})]}),Object(ee.jsx)(b.a.Item,{onClick:function(){var n,a;window.confirm("Are you sure you want to delete this post ?")&&c((n=t._id,a=e._id,function(e){Z.a.patch("/api/posts/delete-comment-post/".concat(n),{commentId:a}).then((function(t){e({type:B,payload:{postId:n,commentId:a}})})).catch((function(e){return console.log(e)}))}))},children:"Delete Comment"})]})]}):null]})}))})]})]})}),Object(ee.jsx)(f.a,{children:Object(ee.jsx)("div",{className:"text-center",children:Object(ee.jsx)("button",{style:{border:"none",backgroundColor:"white"},children:Object(ee.jsx)(N.a,{icon:g.c,size:"lg"})})})})]})}),Object(ee.jsxs)(p.a,{className:"rounded bg-white mb-3 pt-3",children:[Object(ee.jsx)(u.a,{className:"ml-3",src:a.avatar,roundedCircle:!0,width:40,height:40,alt:"Profile image"}),Object(ee.jsx)(p.a.Body,{className:"ml-3 mr-3 mb-3",children:Object(ee.jsxs)(h.a,{action:"",onSubmit:function(e){var n,r,s;e.preventDefault(),U?(c((n=t._id,r=a._id,s=U,function(e){Z.a.patch("/api/posts/comment-post/".concat(n),{commenterId:r,text:s}).then((function(t){e({type:"ADD_COMMENT",payload:{comment:t.data.comments[t.data.comments.length-1]}})})).catch((function(e){return console.log(e)}))})),c($()),q("")):alert("Please fill the form!")},children:[Object(ee.jsx)(h.a.Group,{children:Object(ee.jsx)(h.a.Control,{as:"textarea",rows:3,className:"bg-light",onChange:function(e){return q(e.target.value)},value:U,placeholder:"Write a comment..."})}),Object(ee.jsx)(O.a,{variant:"primary",type:"submit",className:"float-right",children:"Comment"})]})})]})]})]})};var ce=function(){var e=Object(n.useState)(""),t=Object(o.a)(e,2),c=t[0],a=t[1],r=Object(n.useState)(null),s=Object(o.a)(r,2),i=s[0],l=s[1],d=X.getState().user.user,j=Object(w.b)();return Object(ee.jsxs)(p.a,{className:"rounded bg-white mb-3 pt-3",children:[Object(ee.jsx)(u.a,{className:"ml-3",src:d.avatar,roundedCircle:!0,width:40,height:40,alt:"Profile image"}),Object(ee.jsx)(p.a.Body,{className:"ml-3 mr-3 mb-3",children:Object(ee.jsxs)(h.a,{action:"",onSubmit:function(e){if(e.preventDefault(),c||i){var t=new FormData;t.append("posterId",d._id),t.append("message",c),i&&t.append("file",i),j(function(e){return function(t){Z.a.post("/api/posts",e).then((function(e){return t({type:E,payload:e.data})})).catch((function(e){return console.log(e)}))}}(t)),a(""),l(null)}else alert("Please Enter a message !")},children:[Object(ee.jsx)(h.a.Group,{children:Object(ee.jsx)(h.a.Control,{as:"textarea",rows:3,onChange:function(e){return a(e.target.value)},value:c,placeholder:"What's on your mind, "+d.lastName+"?"})}),Object(ee.jsx)(h.a.Group,{children:Object(ee.jsx)(h.a.File,{id:"postImages",label:"Add an image to your Post",onChange:function(e){return l(e.target.files[0])}})}),Object(ee.jsx)(O.a,{variant:"primary",type:"submit",className:"float-right",children:"Post"})]})})]})};var ne=function(e){return Object(ee.jsxs)("div",{class:"bg-white d-block pt-3 ml-3",children:[Object(ee.jsx)(s.b,{to:"/".concat(e.id),children:Object(ee.jsx)(u.a,{src:e.avatar,roundedCircle:!0,width:"100",height:"100",alt:"",className:"mx-auto d-block"})}),Object(ee.jsxs)("h5",{className:"font-weight-bold text-center mt-3",children:["Welcome, ",e.lastName]}),Object(ee.jsx)(s.b,{to:"/".concat(e.id),children:Object(ee.jsx)("p",{class:"text-center",children:"See Profile"})})]})},ae=c(133);var re=function(){return Object(ee.jsx)("div",{className:"text-center mt-5 pt-5",children:Object(ee.jsx)(ae.a,{animation:"border",role:"status",children:Object(ee.jsx)("span",{className:"sr-only",children:"Loading..."})})})};var se=function(){var e=Object(w.c)((function(e){return e.users})),t=Object(w.c)((function(e){return e.posts})),c=Object(w.c)((function(e){return e.user})).user;return Object(ee.jsx)("div",{className:"home",children:Object.keys(c).length&&e.length&&t.length?Object(ee.jsx)(j.a,{className:"mt-3",children:Object(ee.jsxs)(x.a,{children:[Object(ee.jsx)(f.a,{id:"profile-info",children:Object(ee.jsx)(ne,{id:c._id,avatar:c.avatar,lastName:c.lastName})}),Object(ee.jsxs)(f.a,{xs:6,id:"post",children:[Object(ee.jsx)(ce,{}),Object(ee.jsx)("div",{class:"posts",children:t.map((function(e,t){return Object(ee.jsx)(te,{post:Object(l.a)({},e)},t)}))})]}),Object(ee.jsxs)(f.a,{id:"message",children:[Object(ee.jsx)("h5",{children:"Contacts"}),c.friendlist?c.friendlist.map((function(t){return Object(ee.jsx)("a",{href:"#contact",className:"contact",children:Object(ee.jsxs)("div",{className:"d-flex justify-content-between mb-2 pb-2 border-bottom",children:[Object(ee.jsxs)("div",{className:"d-flex align-items-center hover-pointer",children:[Object(ee.jsx)("img",{className:"img-xs rounded-circle",src:e.filter((function(e){return e._id===t}))[0]?e.filter((function(e){return e._id===t}))[0].avatar:null,alt:""}),Object(ee.jsx)("div",{className:"ml-2 pt-3",children:Object(ee.jsx)("p",{children:e.filter((function(e){return e._id===t}))[0]?e.filter((function(e){return e._id===t}))[0].firstName+" "+e.filter((function(e){return e._id===t}))[0].lastName:null})})]}),Object(ee.jsx)(N.a,{icon:v.b,size:"sm",color:"green",className:"m-auto"})]})})})):null]})]})}):Object(ee.jsx)(re,{})})},ie=(c(121),function(e){return function(t){Z.a.get("/api/users/".concat(e)).then((function(e){t({type:F,payload:e.data})}))}}),le=function(){return function(e){Z.a.get("/api/users/").then((function(t){e({type:q,payload:t.data})}))}};var oe=function(e){var t=Object(w.b)(),c=Object(i.g)().profileId,a=Object(w.c)((function(e){return e.users})),r=Object(w.c)((function(e){return e.posts})),l=Object(w.c)((function(e){return e.user})).user,d=Object(n.useState)(!1),b=Object(o.a)(d,2),p=b[0],g=b[1],y=Object(n.useState)(""),_=Object(o.a)(y,2),C=_[0],k=_[1],I=Object(n.useState)(""),S=Object(o.a)(I,2),E=S[0],L=S[1],T=Object(n.useState)(""),P=Object(o.a)(T,2),D=P[0],G=P[1],B=Object(n.useState)(null),z=Object(o.a)(B,2),A=z[0],F=z[1];return Object(ee.jsx)(j.a,{children:Object.keys(l).length&&a.length?Object(ee.jsxs)("div",{className:"profile-page tx-13",children:[Object(ee.jsx)(x.a,{children:Object(ee.jsx)("div",{className:"col-12 grid-margin",children:Object(ee.jsxs)("div",{className:"profile-header",children:[Object(ee.jsxs)("div",{className:"cover",children:[Object(ee.jsx)("div",{className:"gray-shade"}),Object(ee.jsx)("figure",{children:Object(ee.jsx)("img",{src:"cover.jpg",className:"img-fluid h-25",alt:"profile cover"})}),Object(ee.jsxs)("div",{className:"cover-body d-flex justify-content-between align-items-center",children:[Object(ee.jsxs)("div",{children:[Object(ee.jsx)(u.a,{width:70,height:70,roundedCircle:!0,src:a.filter((function(e){return e._id===c}))[0]?a.filter((function(e){return e._id===c}))[0].avatar:null,alt:""}),Object(ee.jsx)("span",{className:"profile-name",children:a.filter((function(e){return e._id===c}))[0]?a.filter((function(e){return e._id===c}))[0].firstName+" "+a.filter((function(e){return e._id===c}))[0].lastName:null})]}),l._id===c?Object(ee.jsxs)("div",{className:"d-none d-md-block",children:[Object(ee.jsxs)(O.a,{variant:"primary",className:"btn-icon-text btn-edit-profile",onClick:function(){return g(!0)},children:[Object(ee.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-edit btn-icon-prepend",children:[Object(ee.jsx)("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),Object(ee.jsx)("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]})," Edit profile"]}),Object(ee.jsxs)(m.a,{size:"lg",show:p,onHide:function(){g(!1),G(""),k(""),L("")},backdrop:"static","aria-labelledby":"edit-profile",children:[Object(ee.jsx)(m.a.Header,{closeButton:!0,children:Object(ee.jsx)(m.a.Title,{id:"edit-profile",children:"Edit your profile"})}),Object(ee.jsx)(m.a.Body,{children:Object(ee.jsxs)(h.a,{className:"text-center",children:[Object(ee.jsxs)(h.a.Group,{className:!0,children:[Object(ee.jsx)(h.a.Label,{children:Object(ee.jsx)(u.a,{src:l.avatar,roundedCircle:!0,width:"200",height:"200",alt:"Profile image",className:"mx-auto d-block"})}),Object(ee.jsx)("div",{className:"d-block w-100 mt-3",children:Object(ee.jsx)("input",{className:"text-center",type:"file",onChange:function(e){return F(e.target.files[0])}})})]}),Object(ee.jsxs)(h.a.Group,{as:x.a,className:"mt-5 ml-5",children:[Object(ee.jsx)(h.a.Label,{column:!0,sm:"2",children:"First Name :"}),Object(ee.jsx)(f.a,{sm:"8",children:Object(ee.jsx)(h.a.Control,{type:"text",value:C,onChange:function(e){return k(e.target.value)},placeholder:l.firstName})})]}),Object(ee.jsxs)(h.a.Group,{as:x.a,className:"mt-5 ml-5",children:[Object(ee.jsx)(h.a.Label,{column:!0,sm:"2",children:"Last Name :"}),Object(ee.jsx)(f.a,{sm:"8",children:Object(ee.jsx)(h.a.Control,{type:"text",value:E,onChange:function(e){return L(e.target.value)},placeholder:l.lastName})})]}),Object(ee.jsxs)(h.a.Group,{as:x.a,className:"mt-5 ml-5",children:[Object(ee.jsx)(h.a.Label,{column:!0,sm:"2",children:"Biography :"}),Object(ee.jsx)(f.a,{sm:"8",children:Object(ee.jsx)(h.a.Control,{as:"textarea",rows:3,value:D,onChange:function(e){return G(e.target.value)},placeholder:l.biographie})})]})]})}),Object(ee.jsxs)(m.a.Footer,{children:[Object(ee.jsx)(O.a,{variant:"secondary",onClick:function(){g(!1),G(""),k(""),L("")},children:"Cancel"}),Object(ee.jsx)(O.a,{variant:"primary",onClick:function(){if(C&&E&&D&&window.confirm("Are you sure you want to edit this profile ?")){if(t((c=l._id,n=D,a=C,r=E,function(e){Z.a.put("/api/users/".concat(c),{biographie:n,firstName:a,lastName:r}).then((function(t){e({type:H,payload:{biographie:n,firstName:a,lastName:r}})})).catch((function(e){return console.log(e)}))})),t(le()),t(ie(l._id)),A){var e=new FormData;e.append("userId",l._id),e.append("pseudo",l.pseudo),e.append("file",A),t(function(e){return function(t){Z.a.post("/api/users/upload",e).then((function(e){t({type:M,payload:e.data.picture}),console.log(e.data)})).catch((function(e){return console.log(e)}))}}(e)),F(null)}G(""),k(""),L(""),g(!1)}else alert("Please fill the form!");var c,n,a,r},children:"Save changes"})]})]})]}):a.filter((function(e){return e._id===c}))[0].friendlist.find((function(e){return e===l._id}))?Object(ee.jsx)("div",{className:"d-none d-md-block",children:Object(ee.jsxs)(O.a,{variant:"primary",className:"btn-icon-text btn-edit-profile",children:[Object(ee.jsx)(N.a,{icon:v.i,color:"white",className:"mr-2"}),"Friends"]})}):a.filter((function(e){return e._id===c}))[0].invitationlist.find((function(e){return e===l._id}))?Object(ee.jsx)("div",{className:"d-none d-md-block",children:Object(ee.jsxs)(O.a,{variant:"primary",className:"btn-icon-text btn-edit-profile",children:[Object(ee.jsx)(N.a,{icon:v.k,color:"white",className:"mr-2"}),"Cancel Request"]})}):Object(ee.jsx)("div",{className:"d-none d-md-block",children:Object(ee.jsxs)(O.a,{variant:"primary",className:"btn-icon-text btn-edit-profile",onClick:function(){var e,n;t((e=l._id,n=c,function(t){Z.a.patch("/api/users/invitations/".concat(n),{id:e}).then((function(c){t({type:R,payload:{senderId:e,receiverId:n}})})).catch((function(e){return console.log(e)}))}))},children:[Object(ee.jsx)(N.a,{icon:v.j,color:"white",className:"mr-2"}),"Add Friend"]})})]})]}),Object(ee.jsx)("div",{className:"header-links",children:Object(ee.jsx)("ul",{className:"links d-flex align-items-center mt-3 mt-md-0",children:Object(ee.jsxs)("li",{className:"header-link-item d-flex align-items-center active",children:[Object(ee.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-columns mr-1 icon-md",children:Object(ee.jsx)("path",{d:"M12 3h7a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-7m0-18H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h7m0-18v18"})}),Object(ee.jsx)("a",{className:"pt-1px d-none d-md-block",href:"#",children:"Timeline"})]})})})]})})}),Object(ee.jsxs)(x.a,{className:"profile-body",children:[Object(ee.jsx)("div",{className:"d-none d-md-block col-md-4 col-xl-3 left-wrapper",children:Object(ee.jsx)("div",{className:"card rounded",children:Object(ee.jsxs)("div",{className:"card-body",children:[Object(ee.jsx)("div",{className:"d-flex align-items-center justify-content-between mb-2",children:Object(ee.jsx)("h6",{className:"card-title mb-0",children:"About"})}),Object(ee.jsx)("p",{children:l.biographie}),Object(ee.jsxs)("div",{className:"mt-3",children:[Object(ee.jsx)("label",{className:"tx-11 font-weight-bold mb-0 text-uppercase",children:"Biography :"}),Object(ee.jsx)("p",{className:"text-muted",children:a.filter((function(e){return e._id===c}))[0]?a.filter((function(e){return e._id===c}))[0].biographie:null})]}),Object(ee.jsxs)("div",{className:"mt-3",children:[Object(ee.jsx)("label",{className:"tx-11 font-weight-bold mb-0 text-uppercase",children:"Joined :"}),Object(ee.jsx)("p",{className:"text-muted",children:a.filter((function(e){return e._id===c}))[0]?a.filter((function(e){return e._id===c}))[0].createdAt:null})]})]})})}),Object(ee.jsxs)("div",{className:"col-md-8 col-xl-6 middle-wrapper",children:[l._id===c?Object(ee.jsx)(ce,{}):null,Object(ee.jsx)("div",{className:"posts",children:r.filter((function(e){return e.posterId===c})).map((function(e,t){return Object(ee.jsx)(te,{post:e},t)}))})]}),Object(ee.jsx)("div",{className:"d-none d-xl-block col-xl-3 right-wrapper",children:Object(ee.jsx)("div",{className:"row",children:Object(ee.jsx)("div",{className:"col-md-12 grid-margin",children:Object(ee.jsx)("div",{className:"card rounded",children:Object(ee.jsxs)("div",{className:"card-body",children:[Object(ee.jsxs)("h6",{className:"card-title",children:["Friends (",a.filter((function(e){return e._id===c}))[0]?a.filter((function(e){return e._id===c}))[0].friendlist.length:null,")"]}),a.filter((function(e){return e._id===c}))[0].friendlist.map((function(e){return Object(ee.jsx)(s.b,{to:"/".concat(e),children:Object(ee.jsx)("div",{className:"d-flex justify-content-between mb-2 pb-2 border-bottom",children:Object(ee.jsxs)("div",{className:"d-flex align-items-center hover-pointer",children:[Object(ee.jsx)("img",{className:"img-xs rounded-circle",src:a.filter((function(t){return t._id===e}))[0]?a.filter((function(t){return t._id===e}))[0].avatar:null,alt:""}),Object(ee.jsx)("div",{className:"ml-2 pt-3",children:Object(ee.jsx)("p",{children:a.filter((function(t){return t._id===e}))[0]?a.filter((function(t){return t._id===e}))[0].firstName+" "+a.filter((function(t){return t._id===e}))[0].lastName:null})})]})})})}))]})})})})})]})]}):Object(ee.jsx)(re,{})})},de=c(138);var je=function(){var e=Object(w.b)(),t=Object(w.c)((function(e){return e.user})).user;return Object(ee.jsxs)(d.a,{className:"navbar navbar-expand-lg",bg:"white",sticky:"top",children:[Object(ee.jsxs)(d.a.Brand,{href:"/",children:[Object(ee.jsx)("img",{alt:"",src:"logochatty.png",width:"40",height:"40",className:"d-inline-block align-middle"})," ",Object(ee.jsx)("span",{className:"align-middle",children:"Chatty"})]}),Object(ee.jsx)(d.a.Collapse,{id:"basic-navbar-nav",className:"align-middle",children:Object(ee.jsxs)(de.a,{className:"ml-auto",children:[Object(ee.jsx)(de.a.Link,{href:"/",children:Object(ee.jsx)(N.a,{icon:v.f,size:"lg"})}),Object(ee.jsx)(de.a.Link,{href:"#chat",children:Object(ee.jsx)(N.a,{icon:v.c,size:"lg"})}),Object(ee.jsx)(de.a.Link,{href:"/users",children:Object(ee.jsx)(N.a,{icon:v.l,size:"lg"})}),Object(ee.jsx)(de.a.Link,{href:"/login",onClick:function(){e((function(e){Z.a.get("/api/users/logout").catch((function(t){console.log("logout..."),e({type:A})}))}))},className:"ml-5 float-right",children:Object(ee.jsx)(N.a,{icon:v.h,size:"lg"})}),t?null:Object(ee.jsx)(i.a,{to:"/login"})]})})]})},ue=c(134),be=c(83);var me=function(){var e=Object(w.b)(),t=Object(w.c)((function(e){return e.user})).user,c=X.getState().users,a=Object(n.useState)(""),r=Object(o.a)(a,2),s=r[0],i=r[1];return Object(n.useEffect)((function(){})),Object(ee.jsx)(j.a,{className:"mt-3",fluid:"sm",children:c.length?Object(ee.jsxs)(x.a,{children:[Object(ee.jsx)(f.a,{xs:3,id:"profile-info",children:Object(ee.jsx)(ne,{id:t._id,avatar:t.avatar,lastName:t.lastName})}),Object(ee.jsx)(f.a,{id:"post",children:Object(ee.jsxs)(j.a,{className:"bg-white",fluid:!0,children:[Object(ee.jsxs)(ue.a,{className:"pb-3",children:[Object(ee.jsx)(be.a,{className:"border-0 bg-light mt-3 pb-3",value:s,onChange:function(e){return i(e.target.value)},type:"text",placeholder:"Search"}),Object(ee.jsx)(ue.a.Append,{children:Object(ee.jsx)(O.a,{variant:"outline-secondary",className:"bg-ligh border-0 mt-3",children:Object(ee.jsx)(N.a,{icon:v.g})})})]}),s?c.filter((function(e){return(e.firstName+" "+e.lastName).includes(s)})).length?c.filter((function(e){return(e.firstName+" "+e.lastName).toLowerCase().includes(s.toLowerCase())})).map((function(e){return Object(ee.jsx)("a",{href:"/"+e._id,className:"contact",children:Object(ee.jsx)("div",{className:"d-flex justify-content-between mb-2 pb-2 border-bottom ml-3",children:Object(ee.jsxs)("div",{className:"d-flex align-items-center hover-pointer",children:[Object(ee.jsx)(u.a,{className:"img-fluid rounded-circle",width:60,height:60,src:e.avatar,alt:""}),Object(ee.jsx)("div",{className:"ml-3",children:Object(ee.jsx)("h6",{children:e.firstName+" "+e.lastName})})]})})})})):Object(ee.jsx)("div",{className:"text-center mt-5 pb-5",children:Object(ee.jsxs)("h6",{children:['There is no user with the name "',s,'"']})}):c.map((function(e){return Object(ee.jsx)("a",{href:"/"+e._id,className:"contact",children:Object(ee.jsx)("div",{className:"d-flex justify-content-between mb-2 pb-2 border-bottom ml-3",children:Object(ee.jsxs)("div",{className:"d-flex align-items-center hover-pointer",children:[Object(ee.jsx)(u.a,{className:"img-fluid rounded-circle",width:60,height:60,src:e.avatar,alt:""}),Object(ee.jsx)("div",{className:"ml-3",children:Object(ee.jsx)("h6",{children:e.firstName+" "+e.lastName})})]})})})}))]})}),Object(ee.jsxs)(f.a,{xs:3,className:"bg-white mr-3",children:[Object(ee.jsx)("h5",{className:"text-center mt-3",children:"Invitations"}),t.invitationlist?t.invitationlist.map((function(n){return Object(ee.jsxs)("div",{className:"d-flex justify-content-between mb-2 pb-2 border-bottom",children:[Object(ee.jsxs)("div",{className:"d-flex align-items-center hover-pointer",children:[Object(ee.jsx)("img",{className:"img-xs rounded-circle",src:c.filter((function(e){return e._id===n}))[0].avatar,alt:""}),Object(ee.jsx)("div",{className:"ml-2 pt-3",children:Object(ee.jsx)("p",{children:c.filter((function(e){return e._id===n}))[0].firstName+" "+c.filter((function(e){return e._id===n}))[0].lastName})})]}),Object(ee.jsx)("button",{className:"border-0 bg-white",onClick:function(){var c,a;e((c=n,a=t._id,function(e){Z.a.patch("/api/users/friends/".concat(c),{id:a}).then((function(t){e({type:U,payload:{senderId:c,receiverId:a}})})).catch((function(e){return console.log(e)}))}))},children:Object(ee.jsx)(N.a,{icon:v.a,size:"lg",color:"green"})})]})})):null]})]}):Object(ee.jsx)(re,{})})};c(122);var he=function(){var e=Object(w.b)(),t=Object(w.c)((function(e){return e.user})).isLogged,c=Object(n.useState)(""),a=Object(o.a)(c,2),r=a[0],l=a[1],d=Object(n.useState)(""),j=Object(o.a)(d,2),u=j[0],b=j[1],m=Object(n.useState)(!1),x=Object(o.a)(m,2),f=x[0],p=x[1];return Object(ee.jsx)("div",{className:"background",children:Object(ee.jsxs)("div",{className:"base-container",children:[Object(ee.jsx)("div",{className:"header",children:"Login to Chatty"}),Object(ee.jsxs)("div",{className:"content",children:[Object(ee.jsx)("div",{className:"image",children:Object(ee.jsx)("img",{src:"./login.svg",alt:""})}),Object(ee.jsxs)(h.a,{children:[Object(ee.jsx)(h.a.Group,{children:Object(ee.jsx)(h.a.Control,{className:"loginInput mt-3",placeholder:"Email",type:"email",required:!0,value:r,onChange:function(e){return l(e.target.value)}})}),Object(ee.jsx)(h.a.Group,{children:Object(ee.jsx)(h.a.Control,{placeholder:"Password",type:"password",required:!0,className:"loginInput",value:u,onChange:function(e){return b(e.target.value)}})})]})]}),Object(ee.jsx)(O.a,{variant:"primary",type:"submit",onClick:function(){console.log("Login..."),r&&u?(p(!0),e(function(e,t){return function(c){Z.a.post("/api/users/login",{email:e,password:t}).then((function(e){console.log(e.data.user),c(ie(e.data.user)),c({type:z})})).catch((function(e){return alert("Email or Password incorrect !")}))}}(r,u))):alert("Please Enter your email and password !")},children:f?t?Object(ee.jsx)(i.a,{to:"/"}):Object(ee.jsx)(re,{}):"Log In"}),Object(ee.jsx)(s.b,{to:"/register",children:Object(ee.jsx)(O.a,{variant:"primary",children:"Register"})})]})})};c(123);function Oe(){var e=Object(n.useState)(""),t=Object(o.a)(e,2),c=t[0],a=t[1],r=Object(n.useState)(""),l=Object(o.a)(r,2),d=l[0],j=l[1],u=Object(n.useState)(""),b=Object(o.a)(u,2),m=b[0],x=b[1],f=Object(n.useState)(""),p=Object(o.a)(f,2),g=p[0],v=p[1],N=Object(n.useState)(""),y=Object(o.a)(N,2),w=y[0],_=y[1],C=Object(n.useState)(""),k=Object(o.a)(C,2),I=k[0],S=k[1],E=Object(n.useState)(!1),L=Object(o.a)(E,2),T=L[0],P=L[1];return Object(ee.jsx)("div",{className:"background",children:Object(ee.jsxs)("div",{className:"base-container",children:[Object(ee.jsx)("div",{className:"logo"}),Object(ee.jsx)("div",{className:"header",children:"Register"}),Object(ee.jsxs)("div",{className:"content",children:[Object(ee.jsx)("div",{className:"image",children:Object(ee.jsx)("img",{src:"./login.svg",alt:""})}),Object(ee.jsxs)(h.a,{onSubmit:function(e){e.preventDefault(),console.log({psuedo:c,firstName:d,lastName:m,email:g,password:w}),c&&d&&m&&g&&w?w===I?Z.a.post("/api/users/register",{pseudo:c,firstName:d,lastName:m,email:g,password:w}).then((function(e){return P(!0)})):alert("passwords are not identical !"):alert("Please enter all informations !")},children:[Object(ee.jsx)(h.a.Group,{children:Object(ee.jsx)(h.a.Control,{className:"loginInput mt-3",placeholder:"Username",type:"username",required:!0,value:c,onChange:function(e){return a(e.target.value)}})}),Object(ee.jsx)(h.a.Group,{children:Object(ee.jsx)(h.a.Control,{className:"loginInput mt-3",placeholder:"First Name",type:"text",required:!0,value:d,onChange:function(e){return j(e.target.value)}})}),Object(ee.jsx)(h.a.Group,{children:Object(ee.jsx)(h.a.Control,{className:"loginInput mt-3",placeholder:"Last Name",type:"text",required:!0,value:m,onChange:function(e){return x(e.target.value)}})}),Object(ee.jsx)(h.a.Group,{children:Object(ee.jsx)(h.a.Control,{className:"loginInput mt-3",placeholder:"Email",type:"email",required:!0,value:g,onChange:function(e){return v(e.target.value)}})}),Object(ee.jsx)(h.a.Group,{children:Object(ee.jsx)(h.a.Control,{placeholder:"Password",type:"password",required:!0,minLength:"6",className:"loginInput",value:w,onChange:function(e){return _(e.target.value)}})}),Object(ee.jsx)(h.a.Group,{children:Object(ee.jsx)(h.a.Control,{placeholder:"Repeat password",type:"password",required:!0,minLength:"6",className:"loginInput",value:I,onChange:function(e){return S(e.target.value)}})}),Object(ee.jsx)(O.a,{variant:"primary",type:"submit",className:"text-center",children:"Register"})]})]}),Object(ee.jsx)(s.b,{to:"/login",children:Object(ee.jsx)(O.a,{children:"Login"})}),T?Object(ee.jsx)(i.a,{to:"/login"}):null]})})}var xe=c(85),fe=c.n(xe),pe=function(){var e=fe.a.get("jwt"),t=Object(w.b)();t(le()),t($()),t((function(e){Z.a.get("/jwtid").then((function(t){e(ie(t.data)),e({type:z})})).catch((function(e){return console.log(e)}))}));var c=Object(w.c)((function(e){return e.user})).isLogged;return Object(ee.jsx)(s.a,{children:Object(ee.jsxs)(i.d,{children:[Object(ee.jsx)(i.b,{path:"/",exact:!0,children:e||c?Object(ee.jsxs)(ee.Fragment,{children:[Object(ee.jsx)(je,{}),Object(ee.jsx)(se,{})]}):Object(ee.jsx)(i.a,{to:"/login"})}),Object(ee.jsx)(i.b,{path:"/login",exact:!0,children:Object(ee.jsx)(he,{})}),Object(ee.jsx)(i.b,{path:"/register",exact:!0,children:Object(ee.jsx)(Oe,{})}),Object(ee.jsx)(i.b,{path:"/users",exact:!0,children:e||c?Object(ee.jsxs)(ee.Fragment,{children:[Object(ee.jsx)(je,{}),Object(ee.jsx)(me,{})]}):Object(ee.jsx)(i.a,{to:"/login"})}),Object(ee.jsx)(i.b,{path:"/:profileId",children:e||c?Object(ee.jsxs)(ee.Fragment,{children:[Object(ee.jsx)(je,{}),Object(ee.jsx)(oe,{})]}):Object(ee.jsx)(i.a,{to:"/login"})}),Object(ee.jsx)(i.a,{to:"/"})]})})};r.a.render(Object(ee.jsx)(w.a,{store:X,children:Object(ee.jsx)(pe,{})}),document.getElementById("root"))},90:function(e,t,c){}},[[124,1,2]]]);
//# sourceMappingURL=main.beed43c1.chunk.js.map